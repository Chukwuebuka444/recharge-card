<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
         body{
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-direction: column;
            box-shadow: 2px 2px 2px 3px gray;
            width: 70%;
            margin-left: 200px;
         }
         .firstspace{
          display: flex;
          justify-content: center;
         }
        .balance{
            width: 500px;
            height: 50px;
            background-color: yellow;
            color: darkgray;
            display: flex;
            align-items: center;
            margin-left: 50px;
        }
        
         .mtn:hover,#airtel:hover,.glo:hover,#mymobile:hover{
           transform: scale(1.05); 
         }
         .generatebtn{
            background-color: black;
            border-radius: 5px;
            width: 100px;
            height: 50px;
            color: white;
            margin-left: 50px;
         }
         .loadbtn{
          background-color: black;
          border-radius: 5px;
            width: 100px;
            height: 50px;
            color: white;
            margin-left: 50px;
         }
         .output,.output2{
          color: green;
          margin-left: 50px;
         }
         .amountscontainer{
          display: flex;
          flex-wrap: wrap;
          width: 500px;
          justify-content: space-between;
          gap: 20px;
          margin-left: 150px;
         }
         .btnz1,.btnz2,.btnz3,.btnz4,.btnz5,.btnz6{
          background-color: white;
          width: 150px;
          height: 70px;
          box-shadow: 2px 2px 2px 3px gray;
          border: none;
          border-radius: 5px;
         }
         .genload{
          display: flex;
          justify-content: space-between;
         }
         .inputs{
          display: flex;
          gap: 30px;
          justify-content: space-between;
          margin-left: 150px;
         }
         .input1,.input2{
          width: 200px;
          outline: none;
          height: 30px;
         }
         .secondoutputs{
          display: flex;
          justify-content: space-between;
          flex-direction: column;
         }
         .out12{
          display: flex;
          justify-content: space-between;
         }
         .btnzz{
          display: flex;
          align-items: center;
          justify-content: space-between;
         }
         .triplebtns{
          background-color: black;
          width: 150px;
          border-radius: 5px;
          height:50px;
          color: white;
         }
    </style>
</head>
<body>
   <div class="firstspace">
     <button onclick="mtnbox()" class="mtn"><img src="mtn1limage.png" alt="" style="width: 200px;"></button>
    <button onclick="airtelbox()" id="airtel"><img src="airtel image.png" alt=""></button>
    <button onclick="globox()" class="glo"><img src="gloimage.jpeg" alt=""></button>
    <button onclick="mymobilebox()" id="mymobile"><img src="mymobileimage.png" alt=""></button>
   </div>
   
    <div class="balance">Balance:</div>
    <div class="amountscontainer">
    <button onclick="fundz1()" class="btnz1">50.00</button>
    <button onclick="fundz2()" class="btnz2">100.00</button>
    <button onclick="fundz3()" class="btnz3">200.00</button>
    <button onclick="fundz4()" class="btnz4">300.00</button>
    <button onclick="fundz5()" class="btnz5">400.00</button>
    <button onclick="fundz6()" class="btnz6">500.00</button>
   </div>
   <div class="inputs">
    <input class="input1" type="text">
   <input class="input2" value="*311*pin#" type="text">
   </div>
   <div class="genload">
    <button onclick="generator()" class="generatebtn">generate</button>
    <button onclick="cardloader()" class="loadbtn">Load Card</button>
   </div>
    <div class="output"></div>
    <div class="secondoutputs">
      <div class="out12">
        <div class="output2"></div>
      <div class="output3"></div>
      </div>
      <div class="btnzz">
        <button onclick="allcards()" class="triplebtns">Allcards</button>
      <button onclick="usedcards()" class="triplebtns">Used cards</button>
      <button onclick="unusedcards()" class="triplebtns">Unused Cards</button>
      </div>
      <table>
        <th>
          <tr>
            <th>S/N</th>
            <th>Provider</th>
            <th>Used</th>
            <th>Amount</th>
            <th>Pin</th>
          </tr>
        </th>
              <tbody class="table"></tbody>
      </table>

    </div>
    <div></div>
</body>
</html>


<script>
  let pick1 = document.querySelector('.btnz1')
  let pick2 = document.querySelector('.btnz2')
  let pick3 = document.querySelector('.btnz3')
  let pick4 = document.querySelector('.btnz4')
  let pick5 = document.querySelector('.btnz5')
  let pick6 = document.querySelector('.btnz6')
  let output = document.querySelector('.output')
  let output2 = document.querySelector('.output2')
  let rechargecards = JSON.parse(localStorage.getItem('rechargecardsdatabase'))||[]
  let provider = 'mtn'
  let output3 = document.querySelector('.output3')
  let cards = document.createElement('cards')
  let generater = document.querySelector('.generatebtn')
  let loadbtn = document.querySelector('.loadbtn')
    let balancebox = document.querySelector('.balance')
    let input1 = document.querySelector('.input1')
    let tables = document.querySelector('.table')
    let input2 = document.querySelector('.input2')
    
    
    
console.log(rechargecards);

function fundz1() {
      let mtnvalue = document.querySelector('.btnz1').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
    function fundz2() {
      let mtnvalue = document.querySelector('.btnz2').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
    function fundz3() {
      let mtnvalue = document.querySelector('.btnz3').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
    function fundz4() {
      let mtnvalue = document.querySelector('.btnz4').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
    function fundz5() {
      let mtnvalue = document.querySelector('.btnz5').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
    function fundz6() {
      let mtnvalue = document.querySelector('.btnz6').textContent
      input1.value = mtnvalue
      console.log(input1.value);
    }
function mtnbox() {
  document.querySelector('.balance').style.backgroundColor = 'yellow' 
    // balancebox.innerHTML = 'Balance:20000'
    output2.innerHTML = `This is your code for ${input1.value} MTN airtime`
    console.log(output2.innerHTML);
    provider = 'mtn'
    console.log(provider);
    
    
  }
function airtelbox() {
  document.querySelector('.balance').style.backgroundColor = 'red'
  // balancebox.innerHTML = 'Balance:15000' 
  output2.innerHTML = `This is your code for ${input1.value} Airtel airtime`
  provider = 'airtel'
  console.log(provider);
}
function globox() {
  document.querySelector('.balance').style.backgroundColor = 'green' 
  // balancebox.innerHTML = 'Balance:100'
  output2.innerHTML = `This is your code for ${input1.value} Glo airtime`
  provider = 'glo'
  console.log(provider);
}
function mymobilebox() {
  document.querySelector('.balance').style.backgroundColor = 'darkgreen'
  // balancebox.innerHTML = 'Balance:222000' 
  output2.innerHTML = `This is your code for ${input1.value} 9Mobile airtime`
  provider = '9mobile'
  console.log(provider);
}

function displayCards() {
    tables.innerHTML = ""
  for (let i = 0; i < rechargecards.length; i++) {
    let element = rechargecards[i]
    tables.innerHTML += 
    `<tr>
      <td>${i+1}</td>  
      <td>${element.providerVal}</td> 
      <td>${element.isUsed}</td> 
      <td>${element.amountVal}</td> 
      <td>${element.pinVal}</td> 
      </tr>`

  }
}
displayCards()
function generator() {
  let card = ""
  console.log(rechargecards);
  
    
    for (let j = 0; j < 12; j++) {
        card += Math.floor(Math.random()*10)
    }
    const cardObject = {
      providerVal: provider,
      pinVal: card,
      isUsed: false,
      amountVal: input1.value.trim()
    }
    rechargecards.push(cardObject)
    localStorage.setItem('rechargecardsdatabase',JSON.stringify(rechargecards))
    console.log(rechargecards);
    displayCards()
  output.innerHTML = card
  console.log(output.innerHTML);

}

  // let mycardobj = {
  //  provider: ,
  //  amount: ,
  // }
  

function cardloader() {
  console.log('Hello');
  console.log(input2.value.trim());
  let inputVal = input2.value.trim().slice(5, input2.value.trim().length-1)
  console.log(inputVal);
  
  if (!input2.value.trim().startsWith('*311*') ||  !input2.value.trim().endsWith('#')) {
    alert('Invalid loading format')
  // } else if (condition) {
    
  // }
}
let loadedpin = rechargecards.find(anyth=> anyth.pinVal === inputVal)

   console.log(loadedpin);
   let currentCard = rechargecards.indexOf(loadedpin)
   console.log(currentCard);
   rechargecards[currentCard].isUsed = true
   displayCards()
  output3.innerHTML = `Your Card is loaded successfully`  
}
function allcards() {
  rechargecards.forEach(function(element,index,arr) {
    console.log(element);
    
    
  }
    
  );
  displayCards()
}
function usedcards() {
  let usedCardsOnly =  rechargecards.filter(card => card.isUsed === true)
  tables.innerHTML = ""
  usedCardsOnly.forEach((card,index) => {
    tables.innerHTML += 
    `<tr>
      <td>${index+1}</td>  
      <td>${card.providerVal}</td> 
      <td>${card.isUsed}</td> 
      <td>${card.amountVal}</td> 
      <td>${card.pinVal}</td> 
      </tr>`;

  })
}
function unusedcards() {
  let usedCardsOnly =  rechargecards.filter(card => card.isUsed === false)
  tables.innerHTML = ""
  usedCardsOnly.forEach((card,index) => {
    tables.innerHTML += 
    `<tr>
      <td>${index+1}</td>  
      <td>${card.providerVal}</td> 
      <td>${card.isUsed}</td> 
      <td>${card.amountVal}</td> 
      <td>${card.pinVal}</td> 
      </tr>`;

  })
}
  
  

   

   
   



  // let inputVal = input2.slice(5, input2.length - 1)
  // console.log(inputVal);
  // console.log(input2);
  
  
  // for (let i = 0; i < rechargecards.length; i++) {
  //   const element = rechargecards[i];
  //   if (inputVal === element) {
  //     console.log(element);
  //     output3.innerHTML = `Your Card is loaded successfully`
  //     console.log(output3.innerHTML);
  //     } 
  //   else{
  //     output3.innerHTML = `Invalid Card`
  //     console.log(output3.innerHTML);
  //   }
  // }
  
  
//  if (rechargecards[index] == input2) {
//   alert('Your card is loaded Successfully')
//   output3.innerHTML = ('Your card is loaded Successfully')
//  } else{
//   alert('Input a valid code')
//  }
 




</script>